/*! 数据库表结构 2014-03-20 */
var Schema=require("jugglingdb").Schema,moment=require("moment"),guid=require("guid"),conf=require("node-conf"),basedir=conf.load("app").appbase,schema=require(basedir+"/database/jdmysql").schema,pbxExtenGroupRelations=require("./ExtenGroupRelations"),pbxExtension=schema.define("pbxExtension",{accountcode:{type:String,length:50},password:{type:String,length:50},deviceproto:{type:String,length:50},devicenumber:{type:String,length:50},devicestring:{type:String,length:100},fristchecked:{type:Number,"default":function(){return 0}},transfernumber:{type:String,length:50,"default":function(){return"deailway=&number="}},dndinfo:{type:String,length:10,"default":function(){return"off"}},failed:{type:String,length:50,"default":function(){return"deailway=hangup&number="}},cretime:{type:String,length:50,"default":function(){return moment().format("YYYY-MM-DD HH:mm:ss")}}});pbxExtension.hasMany(pbxExtenGroupRelations,{as:"groups",foreignKey:"extenid"}),pbxExtension.validatesPresenceOf("accountcode","deviceproto"),pbxExtension.validatesLengthOf("password",{min:4,message:{min:"注册密码必须4位以上"}}),pbxExtension.validatesInclusionOf("deviceproto",{"in":["SIP","IAX2","VIRTUAL"]}),pbxExtension.validatesNumericalityOf("fristchecked",{"int":!0}),pbxExtension.Name="pbxExtension",schema.models.pbxExtension,module.exports=pbxExtension;