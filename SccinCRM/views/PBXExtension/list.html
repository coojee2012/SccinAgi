 <div class="layout_main"> 
 <div class="page_box">
    <div class="column form-column main col form-horizontal">
      <div class="panel panel-default fieldset">
        <div class="panel-heading"> <a href="PBXExtension/upsert" class="btn btn-primary">新建分机</a> </div>
        <div class="panel-body ">
          <div class="form-group">
            <label for="accountcode" class="control-label col-sm-2">分机号码</label>
            <div class="controls  col-sm-3">
              <input type="text" value="" name="accountcode" id="accountcode"  class="form-control input-sm"> 
            </div>
            <label for="deviceproto" class="control-label col-sm-2">分机类型</label>
            <div class="controls  col-sm-3">            
                    <select name="deviceproto" id="deviceproto" class="form-control input-sm">
                      <option value="">全部</option>
                      <option value="SIP">SIP</option>
                      <option value="IAX2">IAX2</option>
                      <option value="VIRTUAL">虚拟分机</option>
                      </select>
              </div>
              <div class="controls  col-sm-2">
                <input type="button" class="btn btn-primary btn-sm" id="search" value="查询">
              </div>             
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
   <table class="table table-striped table-hover table-condensed table-bordered" id="datatable">
      <colgroup>
      <col style="width: 15%;">
      <col style="width: 15%;">
      <col style="width: 15%;">
      <col style="width: 20%;">
      <col style="width: 35%;">
      </colgroup>
      <thead>
        <tr>
          <th>分机号</th>
          <th>分机类型</th>
          <th>设备号</th>
          <th class="text-center">创建时间</th>
          <th class="text-center">操作</th>
        </tr>
      </thead>
      <tbody>
</tbody>
</table>
</div>

<script type="text/javascript">
$(function(){
$('#datatable').dataTable({
  sDom: "<'row'<'col-sm-4'l><'col-sm-4'f><'col-sm-4'T>r>t<'row'<'col-sm-4'i><'col-sm-8 center'p>>",
  sPaginationType: "bootstrap", 
  //bDestroy:true,
  bInfo: true,
  oLanguage: {
  sLengthMenu: "每页显示 _MENU_ 条记录",
    sZeroRecords: "对不起，查询不到任何相关数据",
    sInfo: "当前显示 _START_ 到 _END_ 条，共 _TOTAL_ 条记录",
    sInfoEmtpy: "找不到相关数据",
    //"sInfoFiltered": "数据表中共为 _MAX_ 条记录",  
    sProcessing: "正在加载中...",
    sSearch: "搜索",
    sInfoEmpty: "显示 0 至 0 共 0 项",
   oPaginate: { "sFirst": "第一页", "sPrevious": "上一页 ", "sNext": "下一页 ", "sLast": "末页 " }
  },
    bPaginate: true,
    bFilter:false,
    bProcessing: true,
    bServerSide: true,
    sAjaxSource: "/PBXExtension/table",
    sServerMethod: "POST",
    fnServerParams: function (aoData) {      
      //gt > gete >=  lt  < lte <=   inq IN nin NOT IN neq  != like  LIKE
      aoData.push( { name: "whereCount", value:2} );//添加需要查询的条件个数
      var accountcode=$('#accountcode').val();
      aoData.push( { "name": "whereCol_0", "value":'accountcode'} );
      aoData.push( { "name": "whereWay_0", "value":'like'} );
      aoData.push( { "name": "whereValue_0", "value":accountcode  } );
      var deviceproto=$('#deviceproto').val();
      aoData.push( { "name": "whereCol_1", "value":'deviceproto'} );
      aoData.push( { "name": "whereWay_1", "value":''} );
      aoData.push( { "name": "whereValue_1", "value":deviceproto  } );
    },
    aoColumnDefs: [
      { "sName":"accountcode","mData": "accountcode","bSortable": false,"bVisible": true, "aTargets": [0],
      "mRender": function ( data, type, full ) {
        return '<a href="'+data+'">Download</a>';
      } },
      { "sName":"deviceproto","mData": "deviceproto","bSortable": false,"bVisible": true, "aTargets": [1] },
      { "sName":"devicenumber","mData": "devicenumber","bSortable": false,"bVisible": true, "aTargets": [2] },
      { "sName":"cretime","mData": "cretime","bSortable": false,"bVisible": true, "aTargets": [3] },
      { "sName":"id","mData": "id","bSortable": false,"bVisible": true, "aTargets": [4] }
    ]
   
});

$('#search').click(function(){
 var oTable=$('#datatable').dataTable();
 oTable.fnDraw();
});
});

function datatable(){

}
</script>
