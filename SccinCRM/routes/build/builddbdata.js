/*! 路由处理程序 2014-02-17 */
var Schemas=require("../../database/schema").Schemas,guid=require("guid"),async=require("async");exports.get=function(a,b){async.auto({setDefaultIvr:function(a){var b=[{id:"200",ivrname:"测试IVR200",description:"一个测试的IVR200"},{id:"200100",ivrname:"测试IVR200100",description:"一个测试的IVR200100"},{id:"200200",ivrname:"测试IVR200200",description:"一个测试的IVR200200"}];async.forEach(b,function(a,b){Schemas.PBXIvrMenmu.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setDefaultIvrMode:function(a){var b=[{id:"1",modename:"播放语音",url:"",iconame:"",memo:""},{id:"2",modename:"检查号码归属地",url:"",iconame:"",memo:""},{id:"3",modename:"发起录音",url:"",iconame:"",memo:""},{id:"4",modename:"播放录音",url:"",iconame:"",memo:""},{id:"5",modename:"录制数字字符",url:"",iconame:"",memo:""},{id:"6",modename:"数字方式读出",url:"",iconame:"",memo:""},{id:"7",modename:"读出日期时间",url:"",iconame:"",memo:""},{id:"8",modename:"检测日期",url:"",iconame:"",memo:""},{id:"9",modename:"主叫变换",url:"",iconame:"",memo:""},{id:"10",modename:"拨打号码",url:"",iconame:"",memo:""},{id:"11",modename:"跳转到语音信箱",url:"",iconame:"",memo:""},{id:"12",modename:"跳转到IVR菜单",url:"",iconame:"",memo:""},{id:"13",modename:"WEB交互接口",url:"",iconame:"",memo:""},{id:"14",modename:"AGI扩展接口",url:"",iconame:"",memo:""},{id:"15",modename:"等待几秒",url:"",iconame:"",memo:""},{id:"16",modename:"播放音调",url:"",iconame:"",memo:""},{id:"17",modename:"读出数字字符",url:"",iconame:"",memo:""},{id:"18",modename:"通道阀",url:"",iconame:"",memo:""}];async.forEach(b,function(a,b){Schemas.PBXIvrActMode.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setDefaultRoute:function(a){var b=[{proirety:1,routerline:1,routername:"测试呼入1",optextra:"",callergroup:"all",callerid:"",callerlen:-1,callednum:"",calledlen:3,replacecallerid:"",replacecalledtrim:-1,replacecalledappend:"",processmode:"diallocal",processdefined:""},{proirety:2,routerline:1,routername:"测试呼入2",optextra:"",callergroup:"all",callerid:"",callerlen:-1,callednum:"200",calledlen:6,replacecallerid:"",replacecalledtrim:-1,replacecalledappend:"",processmode:"diallocal",processdefined:""},{proirety:1,routerline:2,routername:"测试呼出1",optextra:"",callergroup:"all",callerid:"",callerlen:-1,callednum:"9",calledlen:12,replacecallerid:"",replacecalledtrim:1,replacecalledappend:"",processmode:"dialout",processdefined:"1"},{proirety:2,routerline:2,routername:"测试呼出2",optextra:"",callergroup:"all",callerid:"",callerlen:-1,callednum:"0",calledlen:12,replacecallerid:"",replacecalledtrim:-1,replacecalledappend:"",processmode:"dialout",processdefined:"2"},{proirety:3,routerline:2,routername:"测试呼出3",optextra:"",callergroup:"all",callerid:"",callerlen:-1,callednum:"",calledlen:8,replacecallerid:"",replacecalledtrim:-1,replacecalledappend:"",processmode:"dialout",processdefined:"3"}];async.forEach(b,function(a,b){Schemas.PBXRouter.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setIvrActions:function(a){var b=[{ivrnumber:"200",ordinal:1,actmode:"18",args:"trunkProto=DAHDI&max=3&donesth=channelMax&donenum="},{ivrnumber:"200",ordinal:2,actmode:"1",args:"interruptible=true&folder=custom&filename=welcome"},{ivrnumber:"200",ordinal:3,actmode:"5",args:"maxdigits=3&addbefore=true&varname=testvar&beep=false"},{ivrnumber:"200",ordinal:4,actmode:"17",args:"varname=testvar&digits="},{ivrnumber:"200",ordinal:5,actmode:"10",args:"varname=testvar&digits=&dialway=diallocal"},{ivrnumber:"200100",ordinal:1,actmode:"10",args:"varname=&digits=401&dialway=diallocal"},{ivrnumber:"200200",ordinal:1,actmode:"10",args:"varname=&digits=402&dialway=diallocal"}];async.forEach(b,function(a,b){Schemas.PBXIvrActions.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setIvrInputs:function(a){var b=[{ivrnumber:"200",general:0,generaltype:"1",generalargs:"aaa",inputnum:"0",gotoivrnumber:"200",gotoivractid:0},{ivrnumber:"200",general:0,generaltype:"1",generalargs:"aaa",inputnum:"1",gotoivrnumber:"200100",gotoivractid:0},{ivrnumber:"200",general:0,generaltype:"1",generalargs:"aaa",inputnum:"2",gotoivrnumber:"200200",gotoivractid:0},{ivrnumber:"200",general:0,generaltype:"1",generalargs:"aaa",inputnum:"8",gotoivrnumber:"200",gotoivractid:1}];async.forEach(b,function(a,b){Schemas.PBXIvrInputs.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setDefaultExtensions:function(a){var b=[{id:"8001",accountcode:"8001",password:"8001",deviceproto:"SIP",devicenumber:"8001",devicestring:"8001"},{id:"8002",accountcode:"8002",password:"8002",deviceproto:"SIP",devicenumber:"8002",devicestring:"8002"},{id:"8003",accountcode:"8003",password:"8003",deviceproto:"SIP",devicenumber:"8003",devicestring:"8003"},{id:"8004",accountcode:"8004",password:"8004",deviceproto:"SIP",devicenumber:"8004",devicestring:"8004"},{id:"8801",accountcode:"8801",password:"8801",deviceproto:"IAX2",devicenumber:"8801",devicestring:"8801"}];async.forEach(b,function(a,b){Schemas.PBXExtension.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setDefaultQueues:function(a){var b=[{id:"401",queuename:"测试队列401",members:"8001&8002&8003&8801"},{id:"402",queuename:"测试队列402",members:"8001&8002&8003&8801"}];async.forEach(b,function(a,b){Schemas.PBXQueue.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setDefaultTrunk:function(a){var b=[{id:"1",trunkname:"测试外线DAHDI",trunkproto:"DADHI",trunkdevice:"g0"},{id:"2",trunkname:"测试外线SIP",trunkproto:"SIP",trunkdevice:"testsip"},{id:"3",trunkname:"测试外线IAX2",trunkproto:"IAX2",trunkdevice:"testiax"}];async.forEach(b,function(a,b){Schemas.PBXTrunk.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setDefaultLocalNumber:function(a){var b=[{id:"8001",localtype:"extension",assign:"extenproto=SIP&timeout=60&transnum=&transway="},{id:"8002",localtype:"extension",assign:"extenproto=SIP&timeout=60&transnum=&transway="},{id:"8003",localtype:"extension",assign:"extenproto=SIP&timeout=60&transnum=200&transway=diallocal"},{id:"8004",localtype:"extension",assign:"extenproto=SIP&timeout=60&transnum=8001&transway=diallocal"},{id:"8802",localtype:"extension",assign:"extenproto=IAX2&timeout=60&transnum=&transway="},{id:"8801",localtype:"extension",assign:"extenproto=IAX2&timeout=60&transnum=&transway="},{id:"200",localtype:"ivr",assign:"0"},{id:"200100",localtype:"ivr",assign:"0"},{id:"200200",localtype:"ivr",assign:"0"},{id:"401",localtype:"queue",assign:"timeout=30&"},{id:"402",localtype:"queue",assign:"timeout=30&"},{id:"301",localtype:"conference",assign:"1"},{id:"302",localtype:"conference",assign:"1"},{id:"501",localtype:"pauseQueueMember",assign:"1"},{id:"502",localtype:"unPauseQueueMember",assign:"1"}];async.forEach(b,function(a,b){Schemas.PBXLocalNumber.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setDefaultScreenPop:function(a){var b=[{id:"8001"},{id:"8002"},{id:"8003"},{id:"8004"},{id:"8801"},{id:"8802"}];async.forEach(b,function(a,b){Schemas.PBXScreenPop.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})},setDefaultConference:function(a){var b=[{id:"301",pincode:"301"},{id:"302",pincode:"302"}];async.forEach(b,function(a,b){Schemas.PBXConference.create(a,function(a,c){b(a,c)})},function(b,c){a(b,c)})}},function(a){b.send(a?a:{test:"1111"})})};